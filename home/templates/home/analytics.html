{% extends "home/base.html" %} {% load staticfiles %} 
{% block scripts %}

<link rel="stylesheet" type="text/css" href="{% static 'analytics.css' %}">
<link rel="stylesheet"
	href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css" />
<script
	src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script
	src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.js'></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.full.min.js"></script>
<script src='{% static "form.js" %}'></script>
<script src='{% static "bootstrap-tokenfield.js" %}'></script>
<script src='{% static "jquery-ui.multidatespicker.js" %}'></script>
<link rel="stylesheet" href='{% static "amcharts/style.css"	%}' type="text/css">

<script src='{% static "amcharts/amcharts.js" %}'type="text/javascript"></script>
<script src='{% static "amcharts/serial.js" %}' type="text/javascript"></script>
<script src='{% static "amcharts/amstock.js" %}' type="text/javascript"></script>
<script type="text/javascript" src='{% static "bootstrap-multiselect.js" %}'></script>
<link rel="stylesheet" href='{% static "bootstrap-multiselect.css" %}' type="text/css"/>
{% endblock %}
{% block title %}Team Cool - SENG 3011{% endblock %} 
{% block content %}
<div class="row">
	<div class="col-md-2 nopadding">
		<div id="options">
			<div class="panel">
			<!-- Button trigger modal -->
			<button type="button" class="btn btn-info btn-sm btn-block"
				data-toggle="modal" data-target="#uploadModal">
				Upload Files (Optional) <span
					class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span>
			</button>
			<hr style="margin-top: 10px; margin-bottom: 10px">
			<h4 class="text-center">Choose an</h4>
			<div class="row">
				<div class="col-md-6">
					<button type="button" class="btn btn-info btn-block" id="eventopt">Event</button>
				</div>
				<div class="col-md-6">
					<button type="button" class="btn btn-info btn-block" id="compopt">Company</button>
				</div>
			</div>
			<div id="events" class="collapse" data-parent="#options">
				<hr style="margin-top: 10px; margin-bottom: 10px">
				<div class="panel-group">
					<div class="panel panel-info">
						<div class="panel-heading">
							<h4 class="panel-title text-center">1. Choose an Event</h4>
						</div>						
						<div id="date" class="panel-body">
								<select id="event_input" multiple="multiple"></select>
							<h5 class="text-center">2b. Choose an Event Date</h5>
								<select id="event_date" multiple="multiple" disabled></select>
						</div>						
					</div>
					<hr style="margin-top: 8px; margin-bottom: 8px">
					<div id="eventSection" class="panel panel-info">
						<div class="panel-heading">
							<h4 class="panel-title text-center">2. Choose a Date Range</h4>
						</div>
						<div class="panel-body nopadding">
							<div class="row panel-body">
								<div class="col-md-5">
									Lower Window <input type='text' id='startValue'
										class="form-control" />
								</div>
								<div class="col-md-2"></div>
								<div class="col-md-5">
									Upper Window <input type='text' id='endValue'
										class="form-control" />
								</div>
							</div>
						</div>
					</div>
					<hr style="margin-top: 8px; margin-bottom: 8px">
					<div id="ricSection" class="panel panel-info">
						<div class="panel-heading">
							<h4 class="panel-title text-center">3. Choose a Company</h4>
						</div>
						<div class="panel-body">
							<select id="rics_search" multiple="multiple"></select>
							<hr style="margin-top: 1px; margin-bottom: 1px">
							<div id="rics"></div>
						</div>
					</div>
				</div>
				<button type="button" class="btn btn-info btn-sm center-block"
				style="align: center;" id="submitOptions">
				4. Submit</button>
			</div>
			<div id="companys" class="collapse" data-parent="#options">
				<hr style="margin-top: 10px; margin-bottom: 10px">
				<div class="panel-group">
					<div id="ricSection" class="panel panel-info">
						<div class="panel-heading">
							<h4 class="panel-title text-center">1. Choose a Company</h4>
						</div>
						<div class="panel-body">
							<select id="rics_search" multiple="multiple"></select>
							<hr style="margin-top: 1px; margin-bottom: 1px">
							<div id="rics"></div>
						</div>
					</div>
					<hr style="margin-top: 8px; margin-bottom: 8px">
					<div class="panel panel-info">
						<div class="panel-heading">
							<h4 class="panel-title text-center">2. Choose an Event</h4>
						</div>
						<div id="date" class="panel-body">
							<select id="event_input" multiple="multiple"></select>
							<h5 class="text-center">3b. Choose an Event Date</h5>
								<select id="event_date" multiple="multiple" disabled></select>
						</div>
					</div>
					<hr style="margin-top: 8px; margin-bottom: 8px">
					<div id="eventSection" class="panel panel-info">
						<div class="panel-heading">
							<h4 class="panel-title text-center">3. Choose a Date Range</h4>
						</div>
						<div class="panel-body nopadding">
							<div class="row panel-body">
								<div class="col-md-5">
									Lower Window <input type='text' id='startValue'
										class="form-control" />
								</div>
								<div class="col-md-2"></div>
								<div class="col-md-5">
									Upper Window <input type='text' id='endValue'
										class="form-control" />
								</div>
							</div>
						</div>
					</div>
				</div>
			<button type="button" class="btn btn-info btn-sm center-block"
				style="align: center" id="submitOptions">
				5. Submit</button>
			</div>
			</div>
		</div>
	</div>
	<div class="col-md-7">
		<!-- Modal -->
		<div class="modal fade" id="uploadModal" tabindex="-1" role="dialog"
			aria-labelledby="uploadLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="uploadLabel">Upload Files</h4>
					</div>
					<div class="modal-body">
						<form id="uploadForm" class="form-inline" action="/eventapi/"
							method="post" enctype="multipart/form-data">
							{% csrf_token %} Price file: <input type="file"
								name="stock_price_data_file">
							<p>
								Event file: <input type="file" name="stock_characteristic_file">
							<p>
							<p>
								<input type="submit" class="form-control" id="uploadButton"
									value="Upload files">
						</form>
						<div hidden id="uploadProgress" class="progress">
							<div id="uploadBar" class="progress-bar" role="progressbar"
								aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
								style="width: 100%">0%</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default btn-danger"
							data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="col-md-12 nopadding">
			<div class="panel panel-default nopadding">
				<div class="panel-heading">
					<h4 class="panel-title">Cumulative returns</h4>
				</div>
				<div id="chartdiv" style="width:100%; height:600px;"></div>
			</div>
		</div>
 	</div>

	<div class="col-md-3 nopadding">
		<div class="panel panel-default">
			<div class="panel-heading row">
				<div class="col-sm-2"><h4 class="panel-title">Save</h4></div>
				<div class="col-sm-10"><h4 class="panel-title">Related News</h4></div>
			</div>
			<div id="newsItems" style="height:600px; overflow-y:scroll"></div>
		</div>
	</div>
</div>
<!-- load values into js from django context -->
<script type="text/javascript">
		portfolio = "{{ portfolio|escapejs }}"
		file_key = "{{ file_key }}"
		savedNews = "{{ news|escapejs }}"
    console.log(file_key);
</script>
<script src='{% static "news.js" %}'></script>
<script src='{% static "graph.js" %}'></script>
{% endblock %}

{# Tool tip code #}
{#			<button type="button"#}
{#				class="btn btn-info glyphicon glyphicon-info-sign btn-xs pull-right"#}
{#				data-toggle="tooltip" data-placement="right"#}
{#				title="Upload data files or use ours! Use tabs to navigate the Analytics Platform">#}
{#			</button>#}